---
title: 同步io、异步io、阻塞和非阻塞之间的关系
subtitle: "【笔记】举例说明"
date: 2017-01-28 14:35:51
tags: 
	- 笔记
	- 前端基础
	- node
layout: post
author: "Trekerz"
header-img: "170128.jpg"
---



### 一、一个例子

“阻塞”与“非阻塞”、“同步”与“异步”不能简单地从字面上来理解，下面提供一个从分布式系统角度的回答。

“阻塞”与“非阻塞”、“同步”与“异步”两组概念是对“接到指令后如何响应？”这个问题的两个角度的描述——分别是从**应用层**和**系统内核**两个角度。

<br/>

举个例子：

> 老张爱喝茶，废话不说，煮开水。
>
> 出场人物：老张，水壶两把（普通水壶，简称水壶；会响的水壶，简称响水壶）。
>
> **1.** 老张把水壶放到火上，立等水开。（同步阻塞）
>
> 老张觉得自己有点傻
>
> **2.** 老张把水壶放到火上，去客厅看电视，时不时去厨房看看水开没有。（同步非阻塞）
>
> 老张还是觉得自己有点傻，于是变高端了，买了把会响笛的那种水壶。水开之后，能大声发出嘀~~~~的噪音。
>
> **3.** 老张把响水壶放到火上，立等水开。（异步阻塞）
>
> 老张觉得这样傻等意义不大
>
> **4.** 老张把响水壶放到火上，去客厅看电视，水壶响之前不再去看它了，响了再去拿壶。（异步非阻塞）
>
> 老张觉得自己聪明了。

**所谓同步异步，只是对于水壶而言。**

**普通水壶，同步；**

**响水壶，异步。**

虽然都能干活，但响水壶可以在自己完工之后，提示老张水开了。这是普通水壶所不能及的。

同步只能让调用者去轮询自己（情况2中），造成老张效率的低下。

**所谓阻塞非阻塞，仅仅对于老张而言。**

**立等的老张，阻塞；**

**看电视的老张，非阻塞。**

情况1和情况3中老张就是阻塞的，媳妇喊他都不知道。虽然3中响水壶是异步的，可对于立等的老张没有太大的意义。所以一般异步是配合非阻塞使用的，这样才能发挥异步的效用。

### 二、理论解释

**1.** 同步和异步关注的是**消息通信机制** (synchronous communication/ asynchronous communication)

所谓同步，就是在发出一个**调用**时，在没有得到结果之前，该调用就不返回。但是一旦调用返回，就得到返回值了。

换句话说，就是由**调用者**主动等待这个调用的结果。

而异步则是相反，调用在发出之后，这个调用就直接返回了，所以没有返回结果。换句话说，当一个异步过程调用发出后，调用者不会立刻得到结果。而是在调用发出后，**被调用者**通过状态、通知来通知调用者，或通过回调函数处理这个调用。

**2.** 阻塞和非阻塞关注的是**程序在等待调用结果（消息，返回值）时的状态**。

阻塞调用是指调用结果返回之前，当前线程会被挂起。调用线程只有在得到结果之后才会返回。

非阻塞调用指在不能立刻得到结果之前，该调用不会阻塞当前线程。

<br/>